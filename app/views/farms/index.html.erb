<div class="bg-success p-5">
  <div class="container">
  <!-- Button trigger modal -->
    <h1 class='text-white my-4'>Les fermes proches de vous</h1>
    <%= simple_form_for :search, url: farms_path, method: :get do |f| %>
      <div class="search-form-control form-group">
        <input class="form-control string required" type="text" name="query" id="search_query" placeholder='Où habitez-vous?' />
        <button name="button" type="submit" class="btn btn-success text-white">
          <i class="fas fa-search"></i> Search
        </button>
      </div>
      <div class="search-form-control form-group">
        <input class="form-control string required" type="text" name="category" id="category" placeholder='Quel type de ferme cherchez-vous?' />
        <button name="button" type="submit" class="btn btn-success text-white">
          <i class="fas fa-search"></i> Search
        </button>
      </div>
      <div class="search-form-control form-group">
        <input class="form-control string required" type="text" name="criterion" id="criterion" placeholder='Quels sont vos critères?' />
        <button name="button" type="submit" class="btn btn-success text-white">
          <i class="fas fa-search"></i> Search
        </button>
      </div>
    <% end %>
  </div>
</div>

<div id="map"
    style="width: 100%; height: 500px;"
    data-markers="<%= @markers.to_json %>"
    data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
    data-latitude="<%= Geocoder.search(params[:query]).first.latitude if !params[:query].nil? %>"
    data-longitude="<%= Geocoder.search(params[:query]).first.longitude if !params[:query].nil? %>"></div>


